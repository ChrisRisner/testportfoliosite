<!-- markdownlint-disable-file -->
# Task Research Documents: Portfolio UI Fixes

Research fixes for social link positioning and active navigation state highlighting.

## Task Implementation Requests
<!-- <per_tasks_for_implementation> -->
* Move social links (Instagram, Threads, Email) to appear immediately below the last album link in the navigation column.
* Ensure the active album link in the navigation is highlighted (changes color from grey to black) when on that album's page.
<!-- <per_tasks_for_implementation> -->

## Scope and Success Criteria
* Scope: `src/templates/index.html`, `src/static/style.css`, `src/build.py`.
* Assumptions: The site is a static site generated by `build.py`. `current_album` variable is available in templates.
* Success Criteria:
  * Social links appear in the correct visual location (removed `margin-top: auto`).
  * Active album link has a distinct visual style (black color) via conditional class application.

## Outline
1.  **Project Structure & Navigation Generation**: The site is generated by `build.py` using Jinja2 templates.
2.  **Social Links Fix**: Remove `margin-top: auto` from `.social-links` in `src/static/style.css`.
3.  **Active State Fix**:
    *   `build.py` already passes `current_album`.
    *   Update `src/templates/index.html` to conditionally add the `active` class if `current_album.slug == album.slug`.

### Potential Next Research
<!-- <per_relevant_next_research> -->
<!-- </per_relevant_next_research> -->

## Research Executed

### File Analysis
*   `src/templates/index.html`: Navigation structure uses a loop over `db.albums`. Social links are in `.social-links` inside `.sidebar`.
*   `src/static/style.css`: `.social-links` has `margin-top: auto`. `.nav-link.active` exists.
*   `src/build.py`: Confirmed checks: `home_html = template.render(db=db, current_album=None)` and `album_html = template.render(db=db, current_album=album)`.

### Code Search Results
*   `.social-links { margin-top: auto; }` found in CSS.
*   `.nav-link:hover, .nav-link.active` found in CSS.

### External Research (Evidence Log)
<!-- <per_relevant_external_research> -->
<!-- </per_relevant_external_research> -->

### Project Conventions
*   Jinja2 templating for static site generation.

## Key Discoveries

### Project Structure
*   Static site generator using Python and Jinja2.
*   CSS Flexbox sidebar.

### Implementation Patterns
*   `margin-top: auto` is used to push content to bottom of flex container. Removing it restores natural flow.
*   Jinja2 context `current_album` is the key to identifying the active page.

### Complete Examples
**CSS Fix:**
```css
/* src/static/style.css */
/* Remove margin-top: auto to stop pushing to bottom */
.social-links {
    /* margin-top: auto;  <-- REMOVE THIS */
    display: flex;
    gap: 15px;
    padding-top: 2rem;
}
```

**Template Fix:**
```html
<!-- src/templates/index.html -->
<a href="/{{ album.slug }}/" class="nav-link {% if current_album and current_album.slug == album.slug %}active{% endif %}">
    {{ album.title }}
</a>
```

## Technical Scenarios

### 1. Fix Social Links Position
**Requirements:**
*   Move social links up to follow the navigation.

**Preferred Approach:**
*   Modify `src/static/style.css`: Remove `margin-top: auto` from the `.social-links` rule. Currently lines 62-65.

### 2. Fix Active Link Highlight
**Requirements:**
*   Apply `.active` class to the link corresponding to the current page.

**Preferred Approach:**
*   Modify `src/templates/index.html`: Update the `<a>` tag in the album loop.
*   Use Jinja condition: `{% if current_album and current_album.slug == album.slug %}active{% endif %}`.

```text
src/static/style.css   # CSS update
src/templates/index.html # Template update
```

**Implementation Details:**
*   `src/static/style.css`: Locate `.social-links` block. Remove `margin-top: auto;`.
*   `src/templates/index.html`: Locate `{% for album in db.albums %}` loop. Update `class="nav-link"` to include conditional check.
